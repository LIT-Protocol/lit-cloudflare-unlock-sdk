function dataURItoBlob(e){for(var t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(t.length),i=new Uint8Array(n),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return new Blob([n],{type:a})}async function onClickedUnlock(e){const t=JSON.parse(atob(e.getAttribute("data-lit"))),a=JSON.parse(atob(t.accessControlConditions)),n=JSON.parse(atob(t.resourceId_base64));console.log(n);const i=a[0].chain,r=await LitJsSdk.checkAndSignAuthMessage({chain:i}),o=document.getElementById("lit-server").getAttribute("src").split("?server=")[1];console.log(`ðŸ‘‰ SERVER: ${o}`);const s=`${o}/api/video_id?jwt=${await litNodeClient.getSignedToken({accessControlConditions:a,chain:i,authSig:r,resourceId:n})}`;console.warn(s);const c=await fetch(s),d=await c.json();e.src=`https://iframe.videodelivery.net/${d}`,e.parentElement.classList.add("active")}function manipulateWrapper(e){var t=e.querySelector("iframe"),a=e.querySelector("button"),n=t.getAttribute("data-readable-conditions"),i=document.createElement("div");i.classList.add("lit-video-description");var r=document.createElement("div");r.classList.add("lit-video-overlay");var o=document.createElement("span");return o.classList.add("lit-video-info"),o.innerText=n,e.insertBefore(r,t),e.appendChild(i),i.appendChild(a),i.appendChild(o),{btn:a,wrapper:e,iframe:t}}buf2hex=e=>[...new Uint8Array(e)].map((e=>e.toString(16).padStart(2,"0"))).join(""),[...document.getElementsByClassName("lit-video-wrapper")].forEach((e=>{const{btn:t,wrapper:a,iframe:n}=manipulateWrapper(e);[t,a].forEach((e=>e.addEventListener("click",(()=>onClickedUnlock(n)))))}));
